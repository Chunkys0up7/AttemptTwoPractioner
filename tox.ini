[tox]
environments =
    py312
    lint

[gh]
python = 3.12

[testenv]
basepython = python3.12
usedevelop = True
whitelist_externals =
    npm
    yarn
    rm
    mkdir
    cp
    mv
    chmod

[testenv:py312]
deps =
    -rrequirements.txt
    pytest>=7.0.0
    pytest-asyncio>=0.20.3
    pytest-cov>=6.1.1
    pytest-mock>=3.14.0
    pytest-xdist>=3.6.1
commands =
    pytest tests/ -v --tb=short

[testenv:lint]
deps =
    black>=23.11.0
    isort>=5.13.2
    flake8>=7.0.0
    mypy>=1.8.0
commands =
    black . --check
    isort . --check
    flake8 .
    mypy .

[pytest]
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts =
    -v
    --tb=short
    -p no:importlib
    -p no:pytester

markers =
    integration: mark a test as an integration test
    unit: mark a test as a unit test
    security: mark a test as a security test
    monitoring: mark a test as a monitoring test
