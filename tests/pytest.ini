[pytest]
pythonpath = ../mcp_project_backend
python_files = test_*.py
addopts = -v --tb=short --asyncio-mode=auto

[pytest.ini]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

[pytest.mark]
markers =
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
    performance: Performance tests
    security: Security tests
    api: API tests
    middleware: Middleware tests
    utils: Utility tests

[pytest-xdist]
looponfail = True
maxprocesses = auto

[tool:pytest]
env =
    TESTING=true
    DEBUG=true
    DATABASE_URL=sqlite:///test.db
    API_V1_STR=/api/v1

[tool:pytest-cov]
paths = mcp
omit =
    mcp/api/main.py
    mcp/core/config.py
    test_*.py
    */__init__.py
    */__main__.py
    */setup.py
    */tests/*
    */examples/*
    */docs/*
    */venv/*
    */.venv/*
    */.pytest_cache/*
    */.coverage*
    */.git/*
    */.tox/*
    */dist/*
    */build/*
    */*.egg-info/*
    */.vscode/*
    */.idea/*
    */__pycache__/*

[tool:pytest-cov:report]
show_missing = True
skip_empty = True
fail_under = 80
precision = 2
sort = name

[tool:pytest-cov:html]
title = MCP Backend Test Coverage

